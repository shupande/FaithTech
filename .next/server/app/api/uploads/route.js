"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/uploads/route";
exports.ids = ["app/api/uploads/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuploads%2Froute&page=%2Fapi%2Fuploads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuploads%2Froute.ts&appDir=%2FUsers%2Fshupan%2FWorkspaces%2Fshare%2F2%2FFaithTech%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshupan%2FWorkspaces%2Fshare%2F2%2FFaithTech&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuploads%2Froute&page=%2Fapi%2Fuploads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuploads%2Froute.ts&appDir=%2FUsers%2Fshupan%2FWorkspaces%2Fshare%2F2%2FFaithTech%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshupan%2FWorkspaces%2Fshare%2F2%2FFaithTech&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_shupan_Workspaces_share_2_FaithTech_src_app_api_uploads_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/uploads/route.ts */ \"(rsc)/./src/app/api/uploads/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/uploads/route\",\n        pathname: \"/api/uploads\",\n        filename: \"route\",\n        bundlePath: \"app/api/uploads/route\"\n    },\n    resolvedPagePath: \"/Users/shupan/Workspaces/share/2/FaithTech/src/app/api/uploads/route.ts\",\n    nextConfigOutput,\n    userland: _Users_shupan_Workspaces_share_2_FaithTech_src_app_api_uploads_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/uploads/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ1cGxvYWRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdXBsb2FkcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNodXBhbiUyRldvcmtzcGFjZXMlMkZzaGFyZSUyRjIlMkZGYWl0aFRlY2glMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGc2h1cGFuJTJGV29ya3NwYWNlcyUyRnNoYXJlJTJGMiUyRkZhaXRoVGVjaCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN1QjtBQUNwRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRlcnktZW11bGF0b3IvP2Y3ZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3NodXBhbi9Xb3Jrc3BhY2VzL3NoYXJlLzIvRmFpdGhUZWNoL3NyYy9hcHAvYXBpL3VwbG9hZHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwbG9hZHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91cGxvYWRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS91cGxvYWRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3NodXBhbi9Xb3Jrc3BhY2VzL3NoYXJlLzIvRmFpdGhUZWNoL3NyYy9hcHAvYXBpL3VwbG9hZHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdXBsb2Fkcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuploads%2Froute&page=%2Fapi%2Fuploads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuploads%2Froute.ts&appDir=%2FUsers%2Fshupan%2FWorkspaces%2Fshare%2F2%2FFaithTech%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshupan%2FWorkspaces%2Fshare%2F2%2FFaithTech&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/uploads/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/uploads/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   config: () => (/* binding */ config)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(rsc)/./src/app/api/utils.ts\");\n\n\n\n\n// 确保上传目录存在\nconst uploadDir = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(process.cwd(), \"public/uploads\");\n// POST /api/uploads\nconst POST = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.withErrorHandler)(async (req)=>{\n    try {\n        const formData = await req.formData();\n        const file = formData.get(\"file\");\n        if (!file) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"No file uploaded\"\n            }, {\n                status: 400\n            });\n        }\n        // 生成唯一文件名\n        const ext = file.name.split(\".\").pop();\n        const fileName = `${Date.now()}-${Math.random().toString(36).substring(2)}.${ext}`;\n        const filePath = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(uploadDir, fileName);\n        // 将文件写入磁盘\n        const bytes = await file.arrayBuffer();\n        const buffer = Buffer.from(bytes);\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(filePath, buffer);\n        // 返回文件URL\n        const fileUrl = `/uploads/${fileName}`;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json((0,_utils__WEBPACK_IMPORTED_MODULE_3__.createApiResponse)({\n            url: fileUrl,\n            name: file.name,\n            size: file.size\n        }));\n    } catch (error) {\n        console.error(\"Upload error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Failed to upload file\"\n        }, {\n            status: 500\n        });\n    }\n});\n// 配置 API 路由以禁用默认的 body 解析\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91cGxvYWRzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ0g7QUFDWjtBQUNtQztBQUU5RCxXQUFXO0FBQ1gsTUFBTUssWUFBWUgsMENBQUlBLENBQUNJLFFBQVFDLEdBQUcsSUFBSTtBQUV0QyxvQkFBb0I7QUFDYixNQUFNQyxPQUFPTCx3REFBZ0JBLENBQUMsT0FBT007SUFDMUMsSUFBSTtRQUNGLE1BQU1DLFdBQVcsTUFBTUQsSUFBSUMsUUFBUTtRQUNuQyxNQUFNQyxPQUFPRCxTQUFTRSxHQUFHLENBQUM7UUFFMUIsSUFBSSxDQUFDRCxNQUFNO1lBQ1QsT0FBT1gscURBQVlBLENBQUNhLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7WUFBbUIsR0FDOUI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLFVBQVU7UUFDVixNQUFNQyxNQUFNTCxLQUFLTSxJQUFJLENBQUNDLEtBQUssQ0FBQyxLQUFLQyxHQUFHO1FBQ3BDLE1BQU1DLFdBQVcsQ0FBQyxFQUFFQyxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFQyxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUVWLElBQUksQ0FBQztRQUNsRixNQUFNVyxXQUFXekIsMENBQUlBLENBQUNHLFdBQVdlO1FBRWpDLFVBQVU7UUFDVixNQUFNUSxRQUFRLE1BQU1qQixLQUFLa0IsV0FBVztRQUNwQyxNQUFNQyxTQUFTQyxPQUFPQyxJQUFJLENBQUNKO1FBQzNCLE1BQU0zQixzREFBU0EsQ0FBQzBCLFVBQVVHO1FBRTFCLFVBQVU7UUFDVixNQUFNRyxVQUFVLENBQUMsU0FBUyxFQUFFYixTQUFTLENBQUM7UUFDdEMsT0FBT3BCLHFEQUFZQSxDQUFDYSxJQUFJLENBQUNULHlEQUFpQkEsQ0FBQztZQUN6QzhCLEtBQUtEO1lBQ0xoQixNQUFNTixLQUFLTSxJQUFJO1lBQ2ZrQixNQUFNeEIsS0FBS3dCLElBQUk7UUFDakI7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGlCQUFpQkE7UUFDL0IsT0FBT3BDLHFEQUFZQSxDQUFDYSxJQUFJLENBQ3RCO1lBQUVDLFNBQVM7UUFBd0IsR0FDbkM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YsR0FBRTtBQUVGLDBCQUEwQjtBQUNuQixNQUFNdUIsU0FBUztJQUNwQkMsS0FBSztRQUNIQyxZQUFZO0lBQ2Q7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGVyeS1lbXVsYXRvci8uL3NyYy9hcHAvYXBpL3VwbG9hZHMvcm91dGUudHM/ZWZlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHdyaXRlRmlsZSB9IGZyb20gJ2ZzL3Byb21pc2VzJ1xuaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnXG5pbXBvcnQgeyB3aXRoRXJyb3JIYW5kbGVyLCBjcmVhdGVBcGlSZXNwb25zZSB9IGZyb20gJy4uL3V0aWxzJ1xuXG4vLyDnoa7kv53kuIrkvKDnm67lvZXlrZjlnKhcbmNvbnN0IHVwbG9hZERpciA9IGpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYy91cGxvYWRzJylcblxuLy8gUE9TVCAvYXBpL3VwbG9hZHNcbmV4cG9ydCBjb25zdCBQT1NUID0gd2l0aEVycm9ySGFuZGxlcihhc3luYyAocmVxKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXEuZm9ybURhdGEoKVxuICAgIGNvbnN0IGZpbGUgPSBmb3JtRGF0YS5nZXQoJ2ZpbGUnKSBhcyBGaWxlXG4gICAgXG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogJ05vIGZpbGUgdXBsb2FkZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIOeUn+aIkOWUr+S4gOaWh+S7tuWQjVxuICAgIGNvbnN0IGV4dCA9IGZpbGUubmFtZS5zcGxpdCgnLicpLnBvcCgpXG4gICAgY29uc3QgZmlsZU5hbWUgPSBgJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyKX0uJHtleHR9YFxuICAgIGNvbnN0IGZpbGVQYXRoID0gam9pbih1cGxvYWREaXIsIGZpbGVOYW1lKVxuICAgIFxuICAgIC8vIOWwhuaWh+S7tuWGmeWFpeejgeebmFxuICAgIGNvbnN0IGJ5dGVzID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpXG4gICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oYnl0ZXMpXG4gICAgYXdhaXQgd3JpdGVGaWxlKGZpbGVQYXRoLCBidWZmZXIpXG4gICAgXG4gICAgLy8g6L+U5Zue5paH5Lu2VVJMXG4gICAgY29uc3QgZmlsZVVybCA9IGAvdXBsb2Fkcy8ke2ZpbGVOYW1lfWBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oY3JlYXRlQXBpUmVzcG9uc2Uoe1xuICAgICAgdXJsOiBmaWxlVXJsLFxuICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgIH0pKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VwbG9hZCBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gdXBsb2FkIGZpbGUnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn0pXG5cbi8vIOmFjee9riBBUEkg6Lev55Sx5Lul56aB55So6buY6K6k55qEIGJvZHkg6Kej5p6QXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBhcGk6IHtcbiAgICBib2R5UGFyc2VyOiBmYWxzZSxcbiAgfSxcbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIndyaXRlRmlsZSIsImpvaW4iLCJ3aXRoRXJyb3JIYW5kbGVyIiwiY3JlYXRlQXBpUmVzcG9uc2UiLCJ1cGxvYWREaXIiLCJwcm9jZXNzIiwiY3dkIiwiUE9TVCIsInJlcSIsImZvcm1EYXRhIiwiZmlsZSIsImdldCIsImpzb24iLCJtZXNzYWdlIiwic3RhdHVzIiwiZXh0IiwibmFtZSIsInNwbGl0IiwicG9wIiwiZmlsZU5hbWUiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZmlsZVBhdGgiLCJieXRlcyIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImZpbGVVcmwiLCJ1cmwiLCJzaXplIiwiZXJyb3IiLCJjb25zb2xlIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/uploads/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/utils.ts":
/*!******************************!*\
  !*** ./src/app/api/utils.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createApiResponse: () => (/* binding */ createApiResponse),\n/* harmony export */   createPaginatedResponse: () => (/* binding */ createPaginatedResponse),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withErrorHandler: () => (/* binding */ withErrorHandler),\n/* harmony export */   withValidation: () => (/* binding */ withValidation)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\n\nconst withErrorHandler = (handler)=>{\n    return async (req, context)=>{\n        try {\n            return await handler(req, context);\n        } catch (error) {\n            console.error(\"API Error:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Internal server error\"\n            }, {\n                status: 500\n            });\n        }\n    };\n};\nconst withAuth = (handler)=>{\n    return async (req, context)=>{\n        const token = req.headers.get(\"authorization\")?.replace(\"Bearer \", \"\");\n        if (!token) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // TODO: Verify token\n        // const user = await verifyToken(token)\n        return handler(req, context);\n    };\n};\nconst withValidation = (schema, handler)=>{\n    return async (req, context)=>{\n        try {\n            const data = await req.json();\n            const validatedData = schema.parse(data);\n            req.validatedData = validatedData;\n            return await handler(req, context);\n        } catch (error) {\n            if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.z.ZodError) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    message: \"Validation error\",\n                    errors: error.errors\n                }, {\n                    status: 400\n                });\n            }\n            throw error;\n        }\n    };\n};\nconst createPaginatedResponse = (data, total, page, perPage)=>{\n    return {\n        data,\n        meta: {\n            total,\n            page,\n            perPage,\n            totalPages: Math.ceil(total / perPage)\n        }\n    };\n};\nconst createApiResponse = (data, message)=>{\n    return {\n        data,\n        message\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTBDO0FBQ25CO0FBa0JoQixNQUFNRSxtQkFBbUIsQ0FBQ0M7SUFDL0IsT0FBTyxPQUFPQyxLQUFLQztRQUNqQixJQUFJO1lBQ0YsT0FBTyxNQUFNRixRQUFRQyxLQUFLQztRQUM1QixFQUFFLE9BQU9DLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLGNBQWNBO1lBQzVCLE9BQU9OLHFEQUFZQSxDQUFDUSxJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO1lBQXdCLEdBQ25DO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7SUFDRjtBQUNGLEVBQUM7QUFFTSxNQUFNQyxXQUFXLENBQUNSO0lBQ3ZCLE9BQU8sT0FBT0MsS0FBa0JDO1FBQzlCLE1BQU1PLFFBQVFSLElBQUlTLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtCQUFrQkMsUUFBUSxXQUFXO1FBRW5FLElBQUksQ0FBQ0gsT0FBTztZQUNWLE9BQU9aLHFEQUFZQSxDQUFDUSxJQUFJLENBQ3RCO2dCQUNFQyxTQUFTO1lBQ1gsR0FDQTtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEscUJBQXFCO1FBQ3JCLHdDQUF3QztRQUV4QyxPQUFPUCxRQUFRQyxLQUFLQztJQUN0QjtBQUNGLEVBQUM7QUFFTSxNQUFNVyxpQkFBaUIsQ0FDNUJDLFFBQ0FkO0lBRUEsT0FBTyxPQUFPQyxLQUFLQztRQUNqQixJQUFJO1lBQ0YsTUFBTWEsT0FBTyxNQUFNZCxJQUFJSSxJQUFJO1lBQzNCLE1BQU1XLGdCQUFnQkYsT0FBT0csS0FBSyxDQUFDRjtZQUNqQ2QsSUFBWWUsYUFBYSxHQUFHQTtZQUM5QixPQUFPLE1BQU1oQixRQUFRQyxLQUFZQztRQUNuQyxFQUFFLE9BQU9DLE9BQU87WUFDZCxJQUFJQSxpQkFBaUJMLGtDQUFDQSxDQUFDb0IsUUFBUSxFQUFFO2dCQUMvQixPQUFPckIscURBQVlBLENBQUNRLElBQUksQ0FDdEI7b0JBQUVDLFNBQVM7b0JBQW9CYSxRQUFRaEIsTUFBTWdCLE1BQU07Z0JBQUMsR0FDcEQ7b0JBQUVaLFFBQVE7Z0JBQUk7WUFFbEI7WUFDQSxNQUFNSjtRQUNSO0lBQ0Y7QUFDRixFQUFDO0FBRU0sTUFBTWlCLDBCQUEwQixDQUNyQ0wsTUFDQU0sT0FDQUMsTUFDQUM7SUFFQSxPQUFPO1FBQ0xSO1FBQ0FTLE1BQU07WUFDSkg7WUFDQUM7WUFDQUM7WUFDQUUsWUFBWUMsS0FBS0MsSUFBSSxDQUFDTixRQUFRRTtRQUNoQztJQUNGO0FBQ0YsRUFBQztBQUVNLE1BQU1LLG9CQUFvQixDQUFJYixNQUFTVDtJQUM1QyxPQUFPO1FBQ0xTO1FBQ0FUO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGVyeS1lbXVsYXRvci8uL3NyYy9hcHAvYXBpL3V0aWxzLnRzP2U1Y2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xuaW1wb3J0IHR5cGUgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJ1xuXG5leHBvcnQgaW50ZXJmYWNlIEFwaUNvbnRleHQge1xuICBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbn1cblxuZGVjbGFyZSBtb2R1bGUgJ25leHQvc2VydmVyJyB7XG4gIGludGVyZmFjZSBOZXh0UmVxdWVzdCB7XG4gICAgdmFsaWRhdGVkRGF0YT86IGFueVxuICB9XG59XG5cbmV4cG9ydCB0eXBlIEFwaUhhbmRsZXIgPSAoXG4gIHJlcTogTmV4dFJlcXVlc3QsXG4gIGNvbnRleHQ6IEFwaUNvbnRleHRcbikgPT4gUHJvbWlzZTxOZXh0UmVzcG9uc2U+XG5cbmV4cG9ydCBjb25zdCB3aXRoRXJyb3JIYW5kbGVyID0gKGhhbmRsZXI6IEFwaUhhbmRsZXIpOiBBcGlIYW5kbGVyID0+IHtcbiAgcmV0dXJuIGFzeW5jIChyZXEsIGNvbnRleHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIocmVxLCBjb250ZXh0KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBUEkgRXJyb3I6JywgZXJyb3IpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB3aXRoQXV0aCA9IChoYW5kbGVyOiBBcGlIYW5kbGVyKTogQXBpSGFuZGxlciA9PiB7XG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0UmVxdWVzdCwgY29udGV4dDogQXBpQ29udGV4dCkgPT4ge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk/LnJlcGxhY2UoJ0JlYXJlciAnLCAnJylcblxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnLFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBWZXJpZnkgdG9rZW5cbiAgICAvLyBjb25zdCB1c2VyID0gYXdhaXQgdmVyaWZ5VG9rZW4odG9rZW4pXG4gICAgXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxLCBjb250ZXh0KVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB3aXRoVmFsaWRhdGlvbiA9IDxUIGV4dGVuZHMgei5ab2RUeXBlPihcbiAgc2NoZW1hOiBULFxuICBoYW5kbGVyOiAocmVxOiBOZXh0UmVxdWVzdCAmIHsgdmFsaWRhdGVkRGF0YTogei5pbmZlcjxUPiB9LCBjb250ZXh0OiBBcGlDb250ZXh0KSA9PiBQcm9taXNlPE5leHRSZXNwb25zZT5cbik6IEFwaUhhbmRsZXIgPT4ge1xuICByZXR1cm4gYXN5bmMgKHJlcSwgY29udGV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxLmpzb24oKVxuICAgICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IHNjaGVtYS5wYXJzZShkYXRhKVxuICAgICAgOyhyZXEgYXMgYW55KS52YWxpZGF0ZWREYXRhID0gdmFsaWRhdGVkRGF0YVxuICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIocmVxIGFzIGFueSwgY29udGV4dClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBtZXNzYWdlOiAnVmFsaWRhdGlvbiBlcnJvcicsIGVycm9yczogZXJyb3IuZXJyb3JzIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVQYWdpbmF0ZWRSZXNwb25zZSA9IDxUPihcbiAgZGF0YTogVFtdLFxuICB0b3RhbDogbnVtYmVyLFxuICBwYWdlOiBudW1iZXIsXG4gIHBlclBhZ2U6IG51bWJlclxuKSA9PiB7XG4gIHJldHVybiB7XG4gICAgZGF0YSxcbiAgICBtZXRhOiB7XG4gICAgICB0b3RhbCxcbiAgICAgIHBhZ2UsXG4gICAgICBwZXJQYWdlLFxuICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gcGVyUGFnZSksXG4gICAgfSxcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlQXBpUmVzcG9uc2UgPSA8VD4oZGF0YTogVCwgbWVzc2FnZT86IHN0cmluZykgPT4ge1xuICByZXR1cm4ge1xuICAgIGRhdGEsXG4gICAgbWVzc2FnZSxcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwieiIsIndpdGhFcnJvckhhbmRsZXIiLCJoYW5kbGVyIiwicmVxIiwiY29udGV4dCIsImVycm9yIiwiY29uc29sZSIsImpzb24iLCJtZXNzYWdlIiwic3RhdHVzIiwid2l0aEF1dGgiLCJ0b2tlbiIsImhlYWRlcnMiLCJnZXQiLCJyZXBsYWNlIiwid2l0aFZhbGlkYXRpb24iLCJzY2hlbWEiLCJkYXRhIiwidmFsaWRhdGVkRGF0YSIsInBhcnNlIiwiWm9kRXJyb3IiLCJlcnJvcnMiLCJjcmVhdGVQYWdpbmF0ZWRSZXNwb25zZSIsInRvdGFsIiwicGFnZSIsInBlclBhZ2UiLCJtZXRhIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwiY3JlYXRlQXBpUmVzcG9uc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuploads%2Froute&page=%2Fapi%2Fuploads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuploads%2Froute.ts&appDir=%2FUsers%2Fshupan%2FWorkspaces%2Fshare%2F2%2FFaithTech%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshupan%2FWorkspaces%2Fshare%2F2%2FFaithTech&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();